!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){"use strict";var r=n(6),i=n(18),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===o.call(e)}function u(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=void 0;e.exports=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i)return i;this.storage={},i=this}return r(e,[{key:"subscribe",value:function(e,t){this.storage.hasOwnProperty(e)||(this.storage[e]=[]),this.storage[e].push(t)}},{key:"publish",value:function(e,t){(this.storage[e]||[]).forEach(function(e){e(t)})}},{key:"unSubscribe",value:function(e,t){var n=this.storage[e].indexOf(t);n>-1&&this.storage[e].splice(n,1)}}]),e}()},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i={plus:'<svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 512 512"\n          x="0px"\n          y="0px"\n          fill=#FFF\n          height=23px\n          width=23px>\n          <path d="M492,236H276V20c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20v216H20c-11.046,0-20,8.954-20,20s8.954,20,20,20h216    v216c0,11.046,8.954,20,20,20s20-8.954,20-20V276h216c11.046,0,20-8.954,20-20C512,244.954,503.046,236,492,236z"/>\n        </svg>',back:'<svg\n          xmlns="http://www.w3.org/2000/svg"\n          viewBox="0 0 240.823 240.823"\n          x="0px"\n          y="0px"\n          fill=#FFF\n          height=23px\n          width=23px >\n            <path d="M57.633,129.007L165.93,237.268c4.752,4.74,12.451,4.74,17.215,0c4.752-4.74,4.752-12.439,0-17.179\n            l-99.707-99.671l99.695-99.671c4.752-4.74,4.752-12.439,0-17.191c-4.752-4.74-12.463-4.74-17.215,0L57.621,111.816\n            C52.942,116.507,52.942,124.327,57.633,129.007z"/>\n        </svg>',cancel:'<svg\n            xmlns="http://www.w3.org/2000/svg"\n            viewBox="0 0 15.642 15.642"\n            x="0"\n            y="0"\n            fill="#1f1d1d"\n            height=23px\n            width=23px >\n              <path fill-rule="evenodd" d="M8.882,7.821l6.541-6.541c0.293-0.293,0.293-0.768,0-1.061  c-0.293-0.293-0.768-0.293-1.061,0L7.821,6.76L1.28,0.22c-0.293-0.293-0.768-0.293-1.061,0c-0.293,0.293-0.293,0.768,0,1.061  l6.541,6.541L0.22,14.362c-0.293,0.293-0.293,0.768,0,1.061c0.147,0.146,0.338,0.22,0.53,0.22s0.384-0.073,0.53-0.22l6.541-6.541  l6.541,6.541c0.147,0.146,0.338,0.22,0.53,0.22c0.192,0,0.384-0.073,0.53-0.22c0.293-0.293,0.293-0.768,0-1.061L8.882,7.821z"/>\n          </svg>',refresh:'<svg\n              xmlns="http://www.w3.org/2000/svg"\n              viewBox="0 0 322.447 322.447"\n              x="0px"\n              y="0px"\n              fill=#FFF\n              height=23px\n              width=23px >\n                <path d="M321.832,230.327c-2.133-6.565-9.184-10.154-15.75-8.025l-16.254,5.281C299.785,206.991,305,184.347,305,161.224   c0-84.089-68.41-152.5-152.5-152.5C68.411,8.724,0,77.135,0,161.224s68.411,152.5,152.5,152.5c6.903,0,12.5-5.597,12.5-12.5   c0-6.902-5.597-12.5-12.5-12.5c-70.304,0-127.5-57.195-127.5-127.5c0-70.304,57.196-127.5,127.5-127.5   c70.305,0,127.5,57.196,127.5,127.5c0,19.372-4.371,38.337-12.723,55.568l-5.553-17.096c-2.133-6.564-9.186-10.156-15.75-8.025   c-6.566,2.134-10.16,9.186-8.027,15.751l14.74,45.368c1.715,5.283,6.615,8.642,11.885,8.642c1.279,0,2.582-0.198,3.865-0.614   l45.369-14.738C320.371,243.946,323.965,236.895,321.832,230.327z"/>\n            </svg>',settings:'<svg\n              xmlns="http://www.w3.org/2000/svg"\n              x="0px"\n              y="0px"\n              viewBox="0 0 369.793 369.792"\n              fill=#FFF\n              height=23px\n              width=23px>\n                <path d="M320.83,140.434l-1.759-0.627l-6.87-16.399l0.745-1.685c20.812-47.201,19.377-48.609,15.925-52.031L301.11,42.61     c-1.135-1.126-3.128-1.918-4.846-1.918c-1.562,0-6.293,0-47.294,18.57L247.326,60l-16.916-6.812l-0.679-1.684     C210.45,3.762,208.475,3.762,203.677,3.762h-39.205c-4.78,0-6.957,0-24.836,47.825l-0.673,1.741l-16.828,6.86l-1.609-0.669     C92.774,47.819,76.57,41.886,72.346,41.886c-1.714,0-3.714,0.769-4.854,1.892l-27.787,27.16     c-3.525,3.477-4.987,4.933,16.915,51.149l0.805,1.714l-6.881,16.381l-1.684,0.651C0,159.715,0,161.556,0,166.474v38.418     c0,4.931,0,6.979,48.957,24.524l1.75,0.618l6.882,16.333l-0.739,1.669c-20.812,47.223-19.492,48.501-15.949,52.025L68.62,327.18     c1.162,1.117,3.173,1.915,4.888,1.915c1.552,0,6.272,0,47.3-18.561l1.643-0.769l16.927,6.846l0.658,1.693     c19.293,47.726,21.275,47.726,26.076,47.726h39.217c4.924,0,6.966,0,24.859-47.857l0.667-1.742l16.855-6.814l1.604,0.654     c27.729,11.733,43.925,17.654,48.122,17.654c1.699,0,3.717-0.745,4.876-1.893l27.832-27.219     c3.501-3.495,4.96-4.924-16.981-51.096l-0.816-1.734l6.869-16.31l1.64-0.643c48.938-18.981,48.938-20.831,48.938-25.755v-38.395     C369.793,159.95,369.793,157.914,320.83,140.434z M184.896,247.203c-35.038,0-63.542-27.959-63.542-62.3     c0-34.342,28.505-62.264,63.542-62.264c35.023,0,63.522,27.928,63.522,62.264C248.419,219.238,219.92,247.203,184.896,247.203z" fill="#FFFFFF"/>\n            </svg>',selectedLocation:'<svg\n                      xmlns="http://www.w3.org/2000/svg"\n                      viewBox="0 0 55.757 55.757"\n                      x="0px"\n                      y="0px"\n                      fill=#FFF\n                      height=23px\n                      width=23px>\n                        <path d="M38.055,29.757c-7.168,0-13,5.832-13,13s5.832,13,13,13s13-5.832,13-13S45.224,29.757,38.055,29.757z M38.055,53.757   c-6.065,0-11-4.935-11-11s4.935-11,11-11s11,4.935,11,11S44.121,53.757,38.055,53.757z"/>\n                        <path d="M43.234,37.186l-5.596,8.04l-3.949-3.241c-0.427-0.352-1.056-0.288-1.407,0.138c-0.351,0.427-0.289,1.058,0.139,1.407   l4.786,3.929c0.18,0.148,0.404,0.228,0.634,0.228c0.045,0,0.091-0.003,0.137-0.01c0.276-0.038,0.524-0.19,0.684-0.419l6.214-8.929   c0.315-0.453,0.204-1.076-0.25-1.392C44.172,36.618,43.55,36.731,43.234,37.186z"/>\n                        <path d="M38.702,26.757c1.129,0,2.23,0.121,3.294,0.345c2.336-7.301,0.713-16.215-4.557-21.484C33.816,1.995,29.001,0,23.879,0   c-5.123,0-9.938,1.995-13.56,5.617c-6.703,6.702-7.536,19.312-1.804,26.952l15.363,22.188l1.85-2.672   c-1.896-2.63-3.027-5.846-3.027-9.328C22.702,33.935,29.879,26.757,38.702,26.757z M17.055,19c0-3.859,3.141-7,7-7s7,3.141,7,7   s-3.141,7-7,7S17.055,22.859,17.055,19z"/>\n                    </svg>'},o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.btn=this.createButton(t),this.btn.addEventListener("click",t.handlerClick),t.parent.appendChild(this.btn)}return r(e,[{key:"createButton",value:function(e){var t=document.createElement("button");return t.className=e.className+" defaultBtn",e.title&&t.setAttribute("title",e.title),t.innerHTML=i[e.name],t}}]),e}();e.exports=o},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var i=new(n(1)),o=n(15),a=n(35),s={distance:"mi",pressure:"in",speed:"mph",temperature:"F"},c={unknow:function(e){return e||"Oops! \n Something went wrong. \n Please try again"},unknowCiti:function(e){return'Weather for "'+e+'" is not available'},weatherAdded:function(e){return'Weather for "'+e+'" already exists'},offline:function(){return"Connection state: \n offline"}},u={settings:{temperature:"c",speed:"km",timeFormat:"24"},isShowBlockSearch:!1,listSities:[],memoryCities:{},weatherFor:[],notFound:!1,onlineStatus:navigator.onLine||window.navigator.onLine,isCardWeather:void 0,currentCitiId:void 0,lastUpdateTime:void 0,invisibilityTime:0,addNewCiti:function(){var e=r(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0,i=void 0,e.prev=1,n=(n=n.split(","))[0]+","+(n[2]||n[1]),e.next=6,o.getWeather(n);case 6:if((i=e.sent).status){e.next=10;break}throw l("unknow",i.message),new Error(i.message);case 10:(i=i.data)._name=n,i.geonameid=r,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0),i=!1;case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}},e,this,[[1,15]])}));return function(t,n,r){return e.apply(this,arguments)}}(),getWeatherForCity:function(){var e=r(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,n=void 0,e.prev=1,e.next=4,a.getStorage();case 4:if(t=e.sent){e.next=7;break}throw new Error;case 7:return t=t.listWeather,r=h(t,"id",this.currentCitiId),e.next=11,o.getWeather(r._name);case 11:if((n=e.sent).status){e.next=15;break}throw l("unknow",n.message),new Error(n.message);case 15:(n=n.data).id=r.id,n.geonameid=r.geonameid,n._name=r._name,e.next=25;break;case 21:e.prev=21,e.t0=e.catch(1),console.error(e.t0),n=!1;case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}},e,this,[[1,21]])}));return function(){return e.apply(this,arguments)}}(),setWeatherCard:function(e,t){var n=e._name,r=e.location,i=e.geonameid,o=e.current_observation,a=o.astronomy,c=o.atmosphere,u=o.wind,l=o.localTime,f=e.current_observation.condition,h=t||d(),p=Date.now(),v=new Date(1e3*e.current_observation.pubDate),m=e.forecasts;return{units:s,astronomy:a,atmosphere:c,item:{condition:f,forecast:m},location:r,wind:u,localTime:l,lastUpdate:v,id:h,geonameid:i,_name:n,_updated:p}},getCitiesBySubstring:function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",console.error("substring can not be empty"));case 2:return n=void 0,r=void 0,e.prev=3,e.next=6,o.getCitiesBySubstring(t);case 6:if(n=e.sent){e.next=9;break}throw new Error;case 9:r=n._embedded["city:search-results"],n.count>0&&(this.memoryCities[t]=r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this,[[3,13]])}));return function(t){return e.apply(this,arguments)}}(),showHidePulsing:function(e){e?(document.querySelector(".pulsingContainer").style.display="none",this.isCardWeather=!0):(document.querySelector(".pulsingContainer").style.display="block",this.isCardWeather=!1)},init:function(){var e=this;document.addEventListener("visibilitychange",function(){document.hidden?e.invisibilityTime=Date.now():Date.now()-e.invisibilityTime>18e5&&e.updateWeather()},!1),window.addEventListener("online",function(){e.onlineStatus=!0}),window.addEventListener("offline",function(){e.onlineStatus=!1,e.listSities=[],e.memoryCities={},i.publish("create-list-cityes",e.listSities),i.publish("show-message",{message:c.offline()})}),i.subscribe("clicked-close-block-search",function(){e.isShowBlockSearch=!e.isShowBlockSearch,i.publish("hide-block-search"),i.publish("disabled-cityes-not-found"),i.publish("create-list-cityes",[]),e.memoryCities={}}),i.subscribe("add-card-weather",function(){e.isShowBlockSearch=!e.isShowBlockSearch,i.publish("show-block-search"),e.isCardWeather||e.showHidePulsing(!0)}),i.subscribe("new-substring-on-search-cityes",function(t){if(!e.onlineStatus)return l("offline");i.publish("disabled-cityes-not-found"),e.notFound=!1;var n=t.key;n?e.memoryCities[n]?(e.listSities=e.memoryCities[n],i.publish("create-list-cityes",e.listSities)):(e.listSities=[],i.publish("create-list-cityes",e.listSities),i.publish("start-load-list-sities"),e.getCitiesBySubstring(n).then(function(t){i.publish("stop-load-list-sities"),t?t.length>0?(e.listSities=t,i.publish("create-list-cityes",e.listSities)):t.length<1&&(i.publish("enabled-cityes-not-found"),e.notFound=!0):(i.publish("hide-block-search"),i.publish("show-message",{message:c.unknow()}))})):i.publish("create-list-cityes",[])}),i.subscribe("selected-city",function(t){if(!e.notFound){e.memoryCities={};var n=e.listSities[+t.index],r=n._links["city:item"].href,o=f(r),s=n.matching_full_name;e.listSities=[],i.publish("hide-block-search"),i.publish("create-list-cityes",e.listSities),e.weatherFor.includes(o)?i.publish("show-message",{message:c.weatherAdded(s)}):(i.publish("start-load-card-weather"),e.addNewCiti(r,s,o).then(function(t){if(i.publish("end-load-card-weather"),!t)return l("unknow");if(t.current_observation){var n=e.setWeatherCard(t);a.setItem(n).then(function(t){t?(e.lastUpdateTime=n._updated,e.weatherFor.push(o),i.publish("create-card-weater",n),i.publish("create-list-saved-sities",[n]),e.changeCurrentCity(n.id)):l("unknow")})}else l("unknowCiti",t._name),i.publish("show-block-search"),e.currentCitiId&&e.setNewCity(e.currentCitiId)}))}}),i.subscribe("update-weather-card",function(){e.updateWeather()}),i.subscribe("input-searh-cleared",function(){e.listSities=[],i.publish("create-list-cityes",e.listSities)}),i.subscribe("delete-card",function(t){var n=t.id;if("number"!=typeof n)return console.error("id must be a number");a.deleteItem(n).then(function(t){if(t){var n=t[0];n.id===e.currentCitiId&&(e.currentCitiId=void 0,e.lastUpdateTime=void 0,i.publish("delete-weather-card"));var r=e.weatherFor.indexOf(n.geonameid);r<0?console.error("non-existent geographical name "+n):(e.weatherFor.splice(r,1),e.weatherFor.length||i.publish("hide-saved-cities"))}else l("unknow")})}),i.subscribe("clicked-open-settings",function(){i.publish("open-settings")}),i.subscribe("new-settings",function(t){if(!e.settings[t.key])throw new Error(t.key+" unknow value");a.setSettings(t).then(function(t){var n=function(n){e.settings[n]!==t.settings[n]&&(e.settings[n]=t.settings[n],t.listWeather.some(function(t){return t.id===e.currentCitiId&&(i.publish("update-units-"+n,[t]),!0)}))};for(var r in t.settings)n(r)})}),i.subscribe("clicked-saved-cities",function(){i.publish("show-saved-cities")}),i.subscribe("change-current-city",function(t){var n=t.id;n||(console.error("unknow id "+n),l("unknow")),e.currentCitiId!==n&&e.setNewCity(n)}),i.subscribe("saved-cityes-closed",function(){e.currentCitiId||a.getStorage().then(function(t){var n=t.listWeather[0];n&&e.setNewCity(n.id)})})},setNewCity:function(e){var t=this;a.setCurrentSity(e).then(function(e){e||l("unknow"),t.currentCitiId=e.id,t.lastUpdateTime=e.city._updated,i.publish("create-card-weater",e.city),p(t.lastUpdateTime)&&t.updateWeather()})},updateWeather:function(){var e=this;if(!this.onlineStatus)return l("offline");i.publish("start-updated-weather-card"),this.getWeatherForCity().then(function(t){if(!t)return i.publish("end-updated-weather-card"),l("unknow");t=e.setWeatherCard(t,t.id),a.updateItemWeather(t).then(function(t){if(!t)return l("unknow");e.lastUpdateTime=t._updated,i.publish("update-card-weater",t)}),i.publish("end-updated-weather-card")})},changeCurrentCity:function(e){var t=this;a.setCurrentSity(e).then(function(e){e||l("unknow"),t.currentCitiId=e.id})},initApp:function(){var e=this;a.init(this.settings).then(function(t){var n=t.settings,r=t.listWeather;if(e.settings=n,e.weatherFor=r.map(function(e){return e.geonameid}),e.isCardWeather=r.length>0,e.showHidePulsing(e.isCardWeather),t.currentSity&&(e.currentCitiId=t.currentSity),r.length>0){i.publish("create-list-saved-sities",r);var o=h(r,"id",e.currentCitiId);e.lastUpdateTime=o._updated,i.publish("create-card-weater",o),p(e.lastUpdateTime)&&e.updateWeather()}i.publish("set-current-settings",{settings:n})})}};u.init();var l=function(e,t){t?i.publish("show-message",{message:c[e](t)}):i.publish("show-message",{message:c[e]()})},d=function(){return Date.now()},f=function(e){return e.match(/geonameid:(\d{1,})\//)[1]},h=function(e,t,n){return e.reduce(function(e,r){return r[t]===n&&(e=r),e},{})},p=function(e){return Date.now()-e>18e5};e.exports=u},function(e,t,n){"use strict";(function(t){var r=n(0),i=n(21),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(7):void 0!==t&&(e=n(7)),e}(),transformRequest:[function(e,t){return i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){s.headers[e]={}}),r.forEach(["post","put","patch"],function(e){s.headers[e]=r.merge(o)}),e.exports=s}).call(t,n(20))},function(e,t,n){"use strict";e.exports=function(e,t){if(t)for(;e.tagName;){if(e.tagName===t)return e;e=e.parentElement}}},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(0),i=n(22),o=n(24),a=n(25),s=n(26),c=n(8);e.exports=function(e){return new Promise(function(t,u){var l=e.data,d=e.headers;r.isFormData(l)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",p=e.auth.password||"";d.Authorization="Basic "+btoa(h+":"+p)}if(f.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?a(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};i(t,u,r),f=null}},f.onerror=function(){u(c("Network Error",e,null,f)),f=null},f.ontimeout=function(){u(c("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var v=n(27),m=(e.withCredentials||s(e.url))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;m&&(d[e.xsrfHeaderName]=m)}if("setRequestHeader"in f&&r.forEach(d,function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)}),e.withCredentials&&(f.withCredentials=!0),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){f&&(f.abort(),u(e),f=null)}),void 0===l&&(l=null),f.send(l)})}},function(e,t,n){"use strict";var r=n(23);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.preloader=this.createLoader(),t.parent.appendChild(this.preloader)}return r(e,[{key:"disabled",value:function(){this.preloader.hidden=!0}},{key:"enabled",value:function(){this.preloader.hidden=!1}},{key:"deletePreloader",value:function(){this.preloader=null}},{key:"createLoader",value:function(){var e=document.createElement("div");return e.className="preloader",e.setAttribute("hidden",!0),e.innerHTML='<svg\n      class="circle"\n      xmlns="http://www.w3.org/2000/svg"\n      width="35px"\n      height="35px"\n      viewBox="0 0 516.727 516.727" >\n      <g>\n          <path fill="#c9cce6" d="M516.727,266.696c-0.665-34.825-8.221-69.54-22.175-101.283c-13.908-31.771-34.094-60.551-58.876-84.333   c-24.767-23.8-54.139-42.615-85.929-55.027c-31.773-12.46-65.937-18.412-99.687-17.69c-33.755,0.668-67.36,8.007-98.091,21.539   c-30.754,13.488-58.615,33.058-81.632,57.071c-23.033,24.001-41.229,52.452-53.222,83.229C5.077,200.962-0.66,234.013,0.06,266.696   c0.67,32.688,7.793,65.182,20.903,94.899c13.067,29.738,32.019,56.681,55.266,78.931c23.234,22.268,50.766,39.846,80.528,51.417   c29.749,11.616,61.69,17.136,93.303,16.419c31.62-0.671,63.001-7.58,91.707-20.268c28.724-12.646,54.747-30.979,76.231-53.461   c21.503-22.469,38.461-49.08,49.611-77.827c6.79-17.427,11.396-35.624,13.824-54.062c0.649,0.037,1.302,0.063,1.96,0.063   c18.409,0,33.333-14.923,33.333-33.333c0-0.936-0.049-1.861-0.124-2.777L516.727,266.696L516.727,266.696z M463.762,355.21   c-12.226,27.71-29.94,52.812-51.655,73.532c-21.703,20.732-47.396,37.076-75.127,47.807c-27.724,10.77-57.443,15.859-86.919,15.146   c-29.481-0.677-58.644-7.154-85.323-18.997c-26.692-11.806-50.877-28.901-70.83-49.849c-19.968-20.938-35.691-45.711-46.001-72.427   c-10.349-26.712-15.223-55.321-14.512-83.728c0.678-28.413,6.941-56.465,18.361-82.131c11.384-25.677,27.863-48.943,48.045-68.13   c20.172-19.202,44.026-34.307,69.726-44.195c25.697-9.928,53.195-14.587,80.534-13.877c27.343,0.68,54.286,6.728,78.939,17.726   c24.662,10.963,47.008,26.824,65.429,46.241c18.436,19.405,32.922,42.341,42.391,67.025c9.504,24.684,13.948,51.072,13.241,77.342   h0.125c-0.076,0.916-0.125,1.841-0.125,2.777c0,17.193,13.018,31.34,29.732,33.137C476.551,320.747,471.184,338.453,463.762,355.21   z"/>\n      </g>\n    </svg>',e}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();new(n(1));var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.init(t.swipedMove,t.swipedEnd)}return r(e,[{key:"init",value:function(e,t){var n=0,r=0,i=0,o=0,a=void 0;this.container.addEventListener("touchstart",function(e){a=e.changedTouches[0],n=a.pageX,r=a.pageY},{passive:!0}),this.container.addEventListener("touchmove",function(t){a=t.changedTouches[0],i=a.pageY-r,o=a.pageX-n,(i=-i)>100||(a.pageX>n?e("right",o,t.target):e("left",o,t.target))},{passive:!0}),this.container.addEventListener("touchend",function(e){a=e.changedTouches[0],o=a.pageX-n,t(e.target,o)})}}]),e}();e.exports=i},function(e,t,n){n(14),e.exports=n(50)},function(e,t,n){"use strict";var r=n(3),i=n(38),o=n(41),a=n(42),s=n(44),c=n(46),u=n(47),l=n(48),d=n(49);new a({container:document.querySelector(".blockSearch")}),new o({container:document.querySelector(".header")}),new s({container:document.querySelector(".listSities")}),new c({container:document.querySelector(".containerMessage")}),new i({container:document.querySelector(".listCardWeater")}),new u({container:document.querySelector(".containerNotFound"),eventName:"cityes-not-found"}),new l({container:document.querySelector(".containerMenu"),form:document.querySelector(".containerSettings")}),new d({container:document.querySelector(".blockSavedCities")}),r.initApp(),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").catch(function(e){return console.error(e)})},function(e,t,n){"use strict";var r=function(){var e=i(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var o=n(16),a={getCitiesBySubstring:function(){var e=i(regeneratorRuntime.mark(function e(t){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,i="https://api.teleport.org/api/cities/?search="+t+"&limit=18",e.prev=2,e.next=5,r(i);case 5:if(200===(n=e.sent).status){e.next=8;break}throw new Error("unknow error");case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),n=!1;case 14:return e.abrupt("return",n.data||!1);case 15:case"end":return e.stop()}},e,this,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),getCity:function(){var e=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,r(t);case 4:if(200===(n=e.sent).status){e.next=7;break}throw new Error("unknow error");case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),n=!1;case 13:return e.abrupt("return",n.data||!1);case 14:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),getWeather:function(){var e=i(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,r("/get-weather?location="+t);case 4:if(200===(n=e.sent).status){e.next=7;break}throw new Error("unknow error");case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),n=!1;case 13:return e.abrupt("return",n.data||!1);case 14:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()};e.exports=a},function(e,t,n){e.exports=n(17)},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(19),a=n(4);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var c=s(a);c.Axios=o,c.create=function(e){return s(r.merge(a,e))},c.Cancel=n(10),c.CancelToken=n(33),c.isCancel=n(9),c.all=function(e){return Promise.all(e)},c.spread=n(34),e.exports=c,e.exports.default=c},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,n){"use strict";var r=n(4),i=n(0),o=n(28),a=n(29);function s(e){this.defaults=e,this.interceptors={request:new o,response:new o}}s.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){s.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){s.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=s},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(8);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},function(e,t,n){"use strict";var r=n(0);function i(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,function(e,t){null!==e&&void 0!==e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(0),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(0);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=i},function(e,t,n){"use strict";var r=n(0),i=n(30),o=n(9),a=n(4),s=n(31),c=n(32);function u(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return u(e),e.baseURL&&!s(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return u(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(10);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i(function(t){e=t}),cancel:e}},e.exports=i},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,o){try{var a=t[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}("next")})}}var i=n(36),o="storage_weather";e.exports={setItem:function(){var e=r(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,this.getStorage();case 4:return(n=e.sent).listWeather.push(t),e.next=8,i.setItem(o,n);case 8:n=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0),n=!1;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),getStorage:function(){return i.getItem(o).then(function(e){return e}).catch(function(e){return console.log(e)})},updateItemWeather:function(){var e=r(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,this.getStorage();case 4:return(n=e.sent).listWeather=n.listWeather.map(function(e){return e.id===t.id&&(e=t),e}),e.next=8,i.setItem(o,n);case 8:if(n=e.sent){e.next=11;break}throw new Error("unknown error");case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0),n=!1;case 17:return e.abrupt("return",n?t:n);case 18:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),deleteItem:function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,r=void 0,a=void 0,e.prev=1,e.next=4,this.getStorage();case 4:return(n=e.sent).listWeather.some(function(e,n){if(e.id===t)return r=n,!0}),a=n.listWeather.splice(r,1),n.currentSity="",e.next=10,i.setItem(o,n);case 10:n=e.sent,e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),a=!1;case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}},e,this,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),setSettings:function(){var e=r(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,this.getStorage();case 4:return(n=e.sent).settings[t.key]=t.value,e.next=8,i.setItem(o,n);case 8:n=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),setCurrentSity:function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,void 0,r=void 0,e.prev=1,e.next=4,this.getStorage();case 4:if(n=e.sent,n.listWeather.some(function(e){return e.id===t&&(r=e)})){e.next=10;break}throw new Error(t+" unknow id");case 10:n.currentSity=t;case 11:return e.next=13,i.setItem(o,n);case 13:n=e.sent,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0),n=!1;case 20:return e.abrupt("return",!!n&&{id:t,city:r});case 21:case"end":return e.stop()}},e,this,[[1,16]])}));return function(t){return e.apply(this,arguments)}}(),init:function(){var e=r(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,this.getStorage();case 4:if(n=e.sent){e.next=9;break}return e.next=8,i.setItem(o,{settings:t,listWeather:[],currentSity:""});case 8:n=e.sent;case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),n=!1;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()}},function(e,t,n){(function(t){var n;
/*!
    localForage -- Offline Storage, Improved
    Version 1.7.3
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(t){e.exports=t()}(function(){return function e(t,r,i){function o(s,c){if(!r[s]){if(!t[s]){if(!c&&("function"==typeof n&&n))return n(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,n,r){(function(e){"use strict";var t,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),t=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,t=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}n.exports=function(e){1!==u.push(e)||r||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=p(function(){t(i,r)});"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t));return n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){if(e instanceof this)return e;return o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var a=new Array(n),s=0,c=-1,u=new this(i);for(;++c<n;)l(e[c],c);return u;function l(e,i){t.resolve(e).then(function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(u,a))},function(e){r||(r=!0,o.reject(u,e))})}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);var a=-1,s=new this(i);for(;++a<n;)c(e[a]);return s;function c(e){t.resolve(e).then(function(e){r||(r=!0,o.resolve(s,e))},function(e){r||(r=!0,o.reject(s,e))})}}},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",f=void 0,h={},p=Object.prototype.toString,v="readonly",m="readwrite";function y(e){return"boolean"==typeof f?a.resolve(f):function(e){return new a(function(t){var n=e.transaction(d,m),r=o([""]);n.objectStore(d).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}}).catch(function(){return!1})}(e).then(function(e){return f=e})}function b(e){var t=h[e.name],n={};n.promise=new a(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function g(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function k(e,t){return new a(function(n,r){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);b(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(d)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),g(e)}})}function S(e){return k(e,!1)}function x(e){return k(e,!0)}function C(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function I(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function E(e){return e&&e.__local_forage_encoded_blob}function T(e){var t=this,n=t._initReady().then(function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return c(n,e,e),n}function _(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then(function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),x(e)}).then(function(){return function(e){b(e);for(var t=h[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,S(e).then(function(t){return e.db=t,C(e)?x(e):t}).then(function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r}).catch(function(t){throw w(e,t),t})}(e).then(function(){_(e,t,n,r-1)})}).catch(n);n(i)}}var L={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=h[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},h[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=T);var o=[];function s(){return a.resolve()}for(var c=0;c<i.forages.length;c++){var u=i.forages[c];u!==t&&o.push(u._initReady().catch(s))}var l=i.forages.slice(0);return a.all(o).then(function(){return n.db=i.db,S(n)}).then(function(e){return n.db=e,C(n,t._defaultConfig.version)?x(n):e}).then(function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var o=l[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}})},_support:function(){try{if(!i)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){_(n._dbInfo,v,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;E(r)&&(r=I(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a(function(t,r){n.ready().then(function(){_(n._dbInfo,v,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),E(e)&&(e=I(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}})}).catch(r)});return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var i=new a(function(n,i){var o;r.ready().then(function(){return o=r._dbInfo,"[object Blob]"===p.call(t)?y(o.db).then(function(e){return e?t:function(e){return new a(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}(t)}):t}).then(function(t){_(r._dbInfo,m,function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return s(i,n),i},removeItem:function(e,t){var n=this;e=u(e);var r=new a(function(t,r){n.ready().then(function(){_(n._dbInfo,m,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}})}).catch(r)});return s(r,t),r},clear:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){_(t._dbInfo,m,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}})}).catch(n)});return s(n,e),n},length:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){_(t._dbInfo,v,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}})}).catch(n)});return s(n,e),n},key:function(e,t){var n=this,r=new a(function(t,r){e<0?t(null):n.ready().then(function(){_(n._dbInfo,v,function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,c=a.openCursor();c.onsuccess=function(){var n=c.result;n?0===e?t(n.key):s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}})}).catch(r)});return s(r,t),r},keys:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){_(t._dbInfo,v,function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){n(o.error)}}catch(e){n(e)}})}).catch(n)});return s(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var o=e.name===r.name&&this._dbInfo.db?a.resolve(this._dbInfo.db):S(e).then(function(t){var n=h[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t});n=e.storeName?o.then(function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;b(e);var r=h[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var c=o[s];c._dbInfo.db=null,c._dbInfo.version=n}return new a(function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}).then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,g(n._dbInfo)}}).catch(function(t){throw(w(e,t)||a.resolve()).catch(function(){}),t})}}):o.then(function(t){b(e);var n=h[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new a(function(t,n){var r=i.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}).then(function(e){n.db=e;for(var t=0;t<r.length;t++)g(r[t]._dbInfo)}).catch(function(t){throw(w(e,t)||a.resolve()).catch(function(){}),t})})}else n=a.reject("Invalid arguments");return s(n,t),n}};var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M="~~local_forage_type~",B=/^~~local_forage_type~([^~]+)~/,F="__lfsc__:",R=F.length,j="arbf",A="blob",O="si08",D="ui08",P="uic8",W="si16",q="si32",U="ur16",z="ui32",H="fl32",K="fl64",V=R+j.length,X=Object.prototype.toString;function J(e){var t,n,r,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=N.indexOf(e[t]),r=N.indexOf(e[t+1]),i=N.indexOf(e[t+2]),o=N.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|i>>2,l[c++]=(3&i)<<6|63&o;return u}function Q(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=N[n[t]>>2],r+=N[(3&n[t])<<4|n[t+1]>>4],r+=N[(15&n[t+1])<<2|n[t+2]>>6],r+=N[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var Y={serialize:function(e,t){var n="";if(e&&(n=X.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===X.call(e.buffer))){var r,i=F;e instanceof ArrayBuffer?(r=e,i+=j):(r=e.buffer,"[object Int8Array]"===n?i+=O:"[object Uint8Array]"===n?i+=D:"[object Uint8ClampedArray]"===n?i+=P:"[object Int16Array]"===n?i+=W:"[object Uint16Array]"===n?i+=U:"[object Int32Array]"===n?i+=q:"[object Uint32Array]"===n?i+=z:"[object Float32Array]"===n?i+=H:"[object Float64Array]"===n?i+=K:t(new Error("Failed to get type for BinaryArray"))),t(i+Q(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=M+e.type+"~"+Q(this.result);t(F+A+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,R)!==F)return JSON.parse(e);var t,n=e.substring(V),r=e.substring(R,V);if(r===A&&B.test(n)){var i=n.match(B);t=i[1],n=n.substring(i[0].length)}var a=J(n);switch(r){case j:return a;case A:return o([a],{type:t});case O:return new Int8Array(a);case D:return new Uint8Array(a);case P:return new Uint8ClampedArray(a);case W:return new Int16Array(a);case U:return new Uint16Array(a);case q:return new Int32Array(a);case z:return new Uint32Array(a);case H:return new Float32Array(a);case K:return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:J,bufferToString:Q};function G(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function $(e,t,n,r,i,o){e.executeSql(n,r,i,function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],function(e,s){s.rows.length?o(e,a):G(e,t,function(){e.executeSql(n,r,i,o)},o)},o):o(e,a)},o)}var Z={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new a(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction(function(i){G(i,n,function(){t._dbInfo=n,e()},function(e,t){r(t)})},r)});return n.serializer=Y,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){$(n,i,"SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var c=o.item(s),u=c.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()},function(e,t){r(t)})})}).catch(r)});return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){$(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})}).catch(r)});return s(r,t),r},setItem:function(e,t,n){return function e(t,n,r,i){var o=this;t=u(t);var c=new a(function(a,s){o.ready().then(function(){void 0===n&&(n=null);var c=n,u=o._dbInfo;u.serializer.serialize(n,function(n,l){l?s(l):u.db.transaction(function(e){$(e,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,n],function(){a(c)},function(e,t){s(t)})},function(n){if(n.code===n.QUOTA_ERR){if(i>0)return void a(e.apply(o,[t,c,r,i-1]));s(n)}})})}).catch(s)});return s(c,r),c}.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=u(e);var r=new a(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){$(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})}).catch(r)});return s(r,t),r},clear:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){$(t,r,"DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})}).catch(n)});return s(n,e),n},length:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){$(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})}).catch(n)});return s(n,e),n},key:function(e,t){var n=this,r=new a(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){$(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})}).catch(r)});return s(r,t),r},keys:function(e){var t=this,n=new a(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){$(t,r,"SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})}).catch(n)});return s(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return s(r=e.name?new a(function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(function(e){return new a(function(t,n){e.transaction(function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})},function(e,t){n(t)})},function(e){n(e)})})}(r))}).then(function(e){return new a(function(t,n){e.db.transaction(function(r){function i(e){return new a(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(e,t){n(t)})})}for(var o=[],s=0,c=e.storeNames.length;s<c;s++)o.push(i(e.storeNames[s]));a.all(o).then(function(){t()}).catch(function(e){n(e)})},function(e){n(e)})})}):a.reject("Invalid arguments"),t),r}};function ee(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function te(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var ne={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=ee(e,this._defaultConfig),te()?(this._dbInfo=t,t.serializer=Y,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(i),a++)))return u}}});return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new a(function(i,o){var a=r._dbInfo;a.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}})})});return s(i,n),i},removeItem:function(e,t){var n=this;e=u(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return s(r,t),r},clear:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return s(n,e),n},length:function(e){var t=this.keys().then(function(e){return e.length});return s(t,e),t},key:function(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return s(r,t),r},keys:function(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r});return s(n,e),n},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return s(r=e.name?new a(function(t){e.storeName?t(ee(e,i._defaultConfig)):t(e.name+"/")}).then(function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):a.reject("Invalid arguments"),t),r}},re=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},ie=function(e,t){for(var n=e.length,r=0;r<n;){if(re(e[r],t))return!0;r++}return!1},oe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},ae={},se={},ce={INDEXEDDB:L,WEBSQL:Z,LOCALSTORAGE:ne},ue=[ce.INDEXEDDB._driver,ce.WEBSQL._driver,ce.LOCALSTORAGE._driver],le=["dropInstance"],de=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),fe={description:"",driver:ue.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function he(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function pe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(oe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ve=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ce)if(ce.hasOwnProperty(n)){var r=ce[n],i=r._driver;this[n]=i,ae[i]||this.defineDriver(r)}this._defaultConfig=pe({},fe),this._config=pe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new a(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=de.concat("_initStorage"),c=0,u=o.length;c<u;c++){var l=o[c];if((!ie(le,l)||e[l])&&"function"!=typeof e[l])return void n(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=a.reject(t);return s(n,arguments[arguments.length-1]),n}},n=0,r=le.length;n<r;n++){var i=le[n];e[i]||(e[i]=t(i))}}();var d=function(n){ae[r]&&console.info("Redefining LocalForage driver: "+r),ae[r]=e,se[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}});return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=ae[e]?a.resolve(ae[e]):a.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=a.resolve(Y);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;oe(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function s(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch(function(){return a.resolve()}):a.resolve();return this._driverSet=u.then(function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then(function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(s).catch(n)}o();var c=new Error("No available storage method found.");return r._driverSet=a.reject(c),r._driverSet}()}}(i)})}).catch(function(){o();var e=new Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet}),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!se[e]},e.prototype._extend=function(e){pe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=de.length;e<t;e++)he(this,de[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ve},{3:3}]},{},[4])(4)})}).call(t,n(37))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(n(1)),o=(n(5),n(39)),a=n(3),s=n(11),c=n(40),u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.intervalId=void 0,this.updatedTimeElem,this.createCardWeater=this.createCardWeater.bind(this),this.enabledPreload=this.enabledPreload.bind(this),this.disabledPreload=this.disabledPreload.bind(this),this.updateTemperature=this.updateTemperature.bind(this),this.updateSpeed=this.updateSpeed.bind(this),this.updateTimeFormat=this.updateTimeFormat.bind(this),this.deleteCard=this.deleteCard.bind(this),i.subscribe("create-card-weater",this.createCardWeater),i.subscribe("update-card-weater",this.createCardWeater),i.subscribe("start-load-card-weather",this.enabledPreload),i.subscribe("end-load-card-weather",this.disabledPreload),i.subscribe("update-units-temperature",this.updateTemperature),i.subscribe("update-units-speed",this.updateSpeed),i.subscribe("update-units-timeFormat",this.updateTimeFormat),i.subscribe("delete-weather-card",this.deleteCard),this.preload=new s({parent:document.querySelector(".containerCardWeater")})}return r(e,[{key:"createCardWeater",value:function(e){var t=document.createElement("li");t.classList.add("itemCardWeather"),t.setAttribute("data-id",e.id),t.innerHTML=function(e){var t=e.location,n=e.item,r=e.atmosphere,i=e.wind,s=e.astronomy,u=s.sunrise,l=s.sunset,d=e.lastUpdate,f=a.settings,h=f.temperature,p=f.speed,v=f.timeFormat,m=n.forecast.slice(1),y=n.forecast[0],b=c[n.condition.code];return'<div class="row">\n        <div class="cell">\n        <div class="cityName">'+t.city+'</div>\n        <div class="regionName">'+t.country+" "+t.region+'</div>\n        <div class="containerDate">\n          <small class="content">'+o.formateToday(d)+'</small>\n          <small class="content monospaceNumber">\n            <small data-time-update="time-update">'+o.getCurrentTime(new Date(e.localTime),v)+'</small>\n            <small class="descriptionTime">( local time )</small>\n          </small>\n          <small class="updatedTime">\n            updated: <small class="time"></small>\n          </small>\n        </div>\n        <div class="blockTemperature">\n          <div class="containerTemperatureToday">\n            <div class="temperatureToday monospaceNumber">'+o.convertTemperature(+n.condition.temperature,h)+'</div>\n            <div class="containerMinMaxToday">\n              <div class="wrapper">\n                <small>&#8595;</small>\n                <span class="minToday monospaceNumber">'+o.convertTemperature(+y.low,h)+'</span>\n              </div>\n              <div class="wrapper">\n                <small>&#8593;</small>\n                <span class="maxToday monospaceNumber">'+o.convertTemperature(+y.high,h)+'</span>\n              </div>\n            </div>\n          </div>\n          <div class="condition">\n            <img class="imgToday" src="images/weather/'+b+'.png" alt="'+b+'" />\n            <div>'+n.condition.text+'</div>\n          </div>\n        </div>\n        </div>\n        <div class="cell descriptionAtmosphere">\n          <div class="content">\n            <span class="title">humidity</span>\n            <span class="humidity monospaceNumber">'+r.humidity+'%</span>\n          </div>\n          <div class="content">\n            <span class="title">pressure</span>\n            <span class="pressure monospaceNumber">\n              '+r.pressure.toFixed(0)+"\n              mbar "+function(e){if(!e)return""}(+r.rising)+'\n            </span>\n          </div>\n          <div class="content">\n            <span class="title">visibility</span>\n            <span class="visibility monospaceNumber">'+(r.visibility?o.getWindStrength(r.visibility,p,""):"n/d")+'</span>\n          </div>\n          <div class="content">\n            <span class="title">wind</span>\n            <span class="wind monospaceNumber">'+o.getWindStrength(i.speed,p,"/h")+'</span>\n            <span class="windDirection">'+o.getDirectionWind(+i.direction)+'</span>\n          </div>\n          <div class="content">\n            <span class="title">sunrise</span>\n            <span class="sunrise monospaceNumber">'+o.getCurrentTime(new Date(1e3*u),v)+'</span>\n          </div>\n          <div class="content">\n            <span class="title">sunset</span>\n            <span class="sunset monospaceNumber">'+o.getCurrentTime(new Date(1e3*l),v,"pm")+'</span>\n          </div>\n        </div>\n        <div class="wrapperForecast">\n          <div class="blockForecast">\n            <div class="titleForecast">Forecast</div>\n            <ul class="listForecast">\n              '+function(e,t){return e.reduce(function(e,n){var r=c[n.code];return e+'\n      <li class="itemForecast">\n        <div class="cellForecast">\n          <div class="containerDate">\n            <time class="dateForecast">'+o.formateDateForecast(1e3*n.date)+'</time>\n          </div>\n          <span class="descriptionForecast">'+n.text+'</span>\n        </div>\n        <div class="cellForecast">\n          <img class="imgForecast" src="images/weather/'+r+'.png" alt="'+r+'"/>\n          <div class="containerMinMax">\n            <div class="maxTemperature">\n              <span class="minIcon monospaceNumber">&#8595;</span>\n              <span class="minT monospaceNumber">'+o.convertTemperature(+n.low,t)+'</span>\n            </div>\n            <div class="minTemperature">\n              <span class="maxIcon">&#8593;</span>\n              <span class="maxT">'+o.convertTemperature(+n.high,t)+"</span>\n            </div>\n          </div>\n        </div>\n      </li>"},"")}(m,h)+"\n            </ul>\n          </div>\n        </div>\n      </div>"}(e),this.container.appendChild(t),this.deleteCard(!0),this.updatedTimeElem=t.querySelector(".updatedTime .time"),this.getLastUpdateTime(),this.addIntervalUpdateTime()}},{key:"getLastUpdateTime",value:function(){var e=o.convertMS(Date.now()-a.lastUpdateTime);e.hours<2?e=e.minutes>=1?e.hours<1?e.minutes+"m ago":e.hours+"h "+e.minutes+"m ago":"less than a minute ago":(clearInterval(this.intervalId),e="over 2 hours ago"),this.updatedTimeElem.innerHTML=e}},{key:"addIntervalUpdateTime",value:function(){var e=this;this.intervalId=setInterval(function(){return e.getLastUpdateTime()},6e4)}},{key:"deleteCard",value:function(e){void 0!==this.intervalId&&clearInterval(this.intervalId),e||(this.container.innerHTML=""),this.container.children[1]&&this.container.children[0].remove()}},{key:"enabledPreload",value:function(){this.deleteCard(),this.preload.enabled()}},{key:"disabledPreload",value:function(){this.preload.disabled()}},{key:"updateTemperature",value:function(e){var t=this,n=void 0,r=void 0,i=void 0,s=void 0,c=a.settings.temperature;e.forEach(function(e){n=t.container.querySelector('[data-id="'+e.id+'"]'),i=n.querySelectorAll(".itemForecast"),r=e.item.forecast.slice(1),s=e.item.forecast[0],n.querySelector(".temperatureToday").innerHTML=o.convertTemperature(+e.item.condition.temperature,c),n.querySelector(".minToday").innerHTML=o.convertTemperature(+s.low,c),n.querySelector(".maxToday").innerHTML=o.convertTemperature(+s.high,c),r.forEach(function(e,t){i[t].querySelector(".minT").innerHTML=o.convertTemperature(+e.low,c),i[t].querySelector(".maxT").innerHTML=o.convertTemperature(+e.high,c)})})}},{key:"updateSpeed",value:function(e){var t=this,n=void 0,r=a.settings.speed;e.forEach(function(e){(n=t.container.querySelector('[data-id="'+e.id+'"]')).querySelector(".visibility").innerHTML=e.atmosphere.visibility?o.getWindStrength(e.atmosphere.visibility,r,""):"n/d",n.querySelector(".wind").innerHTML=o.getWindStrength(e.wind.speed,r,"/h")})}},{key:"updateTimeFormat",value:function(e){var t=this,n=void 0,r=a.settings.timeFormat;e.forEach(function(e){var i=e.astronomy,a=i.sunrise,s=i.sunset;(n=t.container.querySelector('[data-id="'+e.id+'"]')).querySelector('[data-time-update="time-update"]').innerHTML=o.getCurrentTime(new Date(e.localTime),r),n.querySelector(".sunrise").innerHTML=o.getCurrentTime(new Date(1e3*a),r),n.querySelector(".sunset").innerHTML=o.getCurrentTime(new Date(1e3*s),r)})}}]),e}();e.exports=u},function(e,t,n){"use strict";var r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],a={getCurrentTime:function(e,t){var n=e.getMinutes(),r=e.getHours();if(n=s(n),"24"===t)return(r=s(r))+":"+n;var i=r>11?"pm":"am";return r>12?r-=12:0===r&&(r="12"),r+":"+n+" "+i},convertTemperature:function(e,t){return"c"===t?e.toFixed(0)+" C":(9*e/5+32).toFixed(0)+" F"},getWindStrength:function(e,t,n){return"km"===t?(3.6*e).toFixed(1)+" km"+n:(2.094*+e).toFixed(1)+" mi"+n},getDirectionWind:function(e){var t=Math.floor(e/22.5+.5);return o[t%16]},formateToday:function(e){return r[e.getDay()]+", "+e.getDate()+" "+i[e.getMonth()]+" "+e.getFullYear()},formateDateForecast:function(e){var t=new Date(e).toString().split(" ");return t[0]+" "+t[2]+" "+t[1]+" "+t[3]},convertMS:function(e){var t=void 0,n=void 0,r=void 0;return r=Math.floor(e/1e3),n=Math.floor(r/60),r%=60,t=Math.floor(n/60),{hours:t%=24,minutes:n%=60,seconds:r}}};function s(e){return e<10?"0"+e:e}e.exports=a},function(e,t,n){"use strict";e.exports={200:"thunderstorm-with-rain",201:"thunderstorm-with-rain",202:"thunderstorm-with-rain",230:"thunderstorm-with-rain",231:"thunderstorm-with-rain",232:"thunderstorm-with-rain",233:"thunderstorm-with-rain",300:"drizzle",301:"drizzle",302:"drizzle",500:"light-rain",501:"light-rain",502:"heavy-rain",511:"freezing-rain",520:"light-shower-rain",521:"light-shower-rain",522:"heavy-rain",600:"light-snow",601:"snow",602:"snow",610:"mix-snow-rain",611:"mix-snow-rain",612:"mix-snow-rain",621:"snow-shower",622:"snow-shower",623:"flurries",700:"mist",711:"smoke",721:"haze",731:"sand-dust",741:"haze",751:"freezing-fog",800:"clear-sky",801:"few-clouds",802:"few-clouds",803:"broken-clouds",804:"overcast-clouds",900:"mix-snow-rain"}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(n(1)),o=n(2),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container;var n=this.container.querySelector(".wrapperButtons");this.cancelUpdated=this.cancelUpdated.bind(this),this.updateCard=this.updateCard.bind(this),this.startUpdated=this.startUpdated.bind(this),this.savedCities=this.savedCities.bind(this),i.subscribe("end-updated-weather-card",this.cancelUpdated),i.subscribe("start-updated-weather-card",this.startUpdated),new o({parent:this.container.querySelector(".btnMenu"),name:"settings",className:"settings",title:"Settings",handlerClick:this.openSettings}),new o({parent:n,className:"savedCities",name:"selectedLocation",title:"saved-cities",handlerClick:this.savedCities}),this.btnUpdate=new o({parent:n,className:"updateCard",name:"refresh",title:"Update weather",handlerClick:this.updateCard}),new o({parent:n,name:"plus",className:"addCard",title:"Add city",handlerClick:this.addCard})}return r(e,[{key:"addCard",value:function(e){i.publish("add-card-weather")}},{key:"updateCard",value:function(e){i.publish("update-weather-card")}},{key:"cancelUpdated",value:function(){this.btnUpdate.btn.classList.remove("activeUpdate")}},{key:"startUpdated",value:function(){this.btnUpdate.btn.classList.add("activeUpdate")}},{key:"openSettings",value:function(){i.publish("clicked-open-settings")}},{key:"savedCities",value:function(){i.publish("clicked-saved-cities")}}]),e}();e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(n(1)),o=n(43),a=n(2),s=n(11),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.disabledBlockSearch=this.disabledBlockSearch.bind(this),this.enabledBlockSearch=this.enabledBlockSearch.bind(this),this.newSubstring=this.newSubstring.bind(this),this.checkKeyCode=this.checkKeyCode.bind(this),this.enabledPreload=this.enabledPreload.bind(this),this.disabledPreload=this.disabledPreload.bind(this),i.subscribe("hide-block-search",this.disabledBlockSearch),i.subscribe("show-block-search",this.enabledBlockSearch),i.subscribe("start-load-list-sities",this.enabledPreload),i.subscribe("stop-load-list-sities",this.disabledPreload),this.inputSearch=new o({parent:this.container.querySelector(".containerSearch"),inputHandler:this.newSubstring}),this.preload=new s({parent:this.container.querySelector(".containerListSities")}),new a({parent:this.container.querySelector(".wrapper"),className:"btnBack",name:"back",handlerClick:this.closeBlock})}return r(e,[{key:"enabledPreload",value:function(){this.preload.enabled()}},{key:"disabledPreload",value:function(){this.preload.disabled()}},{key:"closeBlock",value:function(){i.publish("clicked-close-block-search")}},{key:"disabledBlockSearch",value:function(){var e=this;this.container.classList.add("animationOpacity"),setTimeout(function(){e.container.classList.add("disabled"),e.container.classList.remove("animationOpacity")},250),document.removeEventListener("keydown",this.checkKeyCode),this.inputSearch.disabled()}},{key:"enabledBlockSearch",value:function(){this.container.classList.remove("disabled"),document.addEventListener("keydown",this.checkKeyCode),this.inputSearch.setFocus()}},{key:"checkKeyCode",value:function(e){27===e.keyCode&&this.closeBlock()}},{key:"newSubstring",value:function(e){var t=e.target.value;t=t.trim(),i.publish("new-substring-on-search-cityes",{key:t})}}]),e}();e.exports=c},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=n(2),o=new(n(1)),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this.createInput();this.input=n.querySelector(".inputSearch"),t.parent.appendChild(n),this.clearInput=this.clearInput.bind(this),this.close=new i({parent:n,className:"buttonClear",name:"cancel",handlerClick:this.clearInput}),this.input.addEventListener("input",t.inputHandler)}return r(e,[{key:"createInput",value:function(){var e=document.createElement("div"),t=document.createElement("input");return e.appendChild(t),e.className="containerInput",t.className="inputSearch",t.setAttribute("type","text"),t.setAttribute("aria-label","search city"),t.setAttribute("placeholder","City name"),e}},{key:"clearInput",value:function(){if(!this.input.value)return this.setFocus();this.input.value="",this.setFocus(),o.publish("input-searh-cleared")}},{key:"disabled",value:function(){this.input.value="",this.input.blur()}},{key:"setFocus",value:function(){this.input.focus()}}]),e}();e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(n(1)),o=n(45),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.selectedCity=this.selectedCity.bind(this),this.createListCityes=this.createListCityes.bind(this),i.subscribe("create-list-cityes",this.createListCityes),this.container.addEventListener("click",this.selectedCity),this.selectItemList=new o({list:this.container,selectHandler:this.selectedCity})}return r(e,[{key:"createListCityes",value:function(e){var t=(e=e||[]).reduce(function(e,t,n){return e+='<li class="itemListSities" data-index='+n+">"+t.matching_full_name+"</li>"},"");this.container.innerHTML=t,e.length>=1&&this.selectItemList.enabled()}},{key:"selectedCity",value:function(e){this.selectItemList.disabled(),i.publish("selected-city",{index:e.target.getAttribute("data-index")})}}]),e}();e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.list=t.list,this.activeItem,this.selectItemList=t.selectHandler,this.checkKeyCode=this.checkKeyCode.bind(this)}return r(e,[{key:"disabled",value:function(){this.activeItem.classList.remove("active"),this.activeItem=null,document.removeEventListener("keydown",this.checkKeyCode)}},{key:"enabled",value:function(){this.activeItem=this.list.children[0],this.activeItem.classList.add("active"),document.addEventListener("keydown",this.checkKeyCode)}},{key:"checkKeyCode",value:function(e){var t=e.keyCode;38===t?this.selectPreviousItem():40===t?this.selectNextItem():13===t&&this.selectItem()}},{key:"selectPreviousItem",value:function(){if(this.activeItem.previousElementSibling){var e=this.activeItem.previousElementSibling;this.activeItem.classList.remove("active"),e.classList.add("active"),this.activeItem=e}}},{key:"selectNextItem",value:function(){if(this.activeItem.nextElementSibling){var e=this.activeItem.nextElementSibling;this.activeItem.classList.remove("active"),e.classList.add("active"),this.activeItem=e}}},{key:"selectItem",value:function(){this.activeItem&&this.selectItemList({target:this.activeItem})}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(n(1)),o=n(2),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.message=this.container.querySelector(".message"),this.deleteMessage=this.deleteMessage.bind(this),this.showMessage=this.showMessage.bind(this),this.checkKeyCode=this.checkKeyCode.bind(this),this.close=new o({parent:this.container,className:"deleteMessage",name:"cancel",handlerClick:this.deleteMessage}),i.subscribe("show-message",this.showMessage)}return r(e,[{key:"showMessage",value:function(e){var t=this;this.message.innerHTML=e.message,this.container.classList.add("active"),setTimeout(function(){return t.hideMessage()},12e3),document.addEventListener("keydown",this.checkKeyCode)}},{key:"hideMessage",value:function(){document.removeEventListener("keydown",this.checkKeyCode),this.container.classList.remove("active"),this.message.innerHTML=""}},{key:"deleteMessage",value:function(){this.hideMessage()}},{key:"checkKeyCode",value:function(e){27===e.keyCode&&this.hideMessage()}}]),e}();e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(n(1)),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.disabled(),this.enabled=this.enabled.bind(this),this.disabled=this.disabled.bind(this),i.subscribe("disabled-"+t.eventName,this.disabled),i.subscribe("enabled-"+t.eventName,this.enabled)}return r(e,[{key:"disabled",value:function(){this.container.hidden=!0}},{key:"enabled",value:function(){this.container.hidden=!1}}]),e}();e.exports=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(5);var i=new(n(1)),o=n(2),a=n(12),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.active=0,this.openMenu=this.openMenu.bind(this),this.closeMenu=this.closeMenu.bind(this),this.saveSettings=this.saveSettings.bind(this),this.setCurrentValue=this.setCurrentValue.bind(this),this.checkKeyCode=this.checkKeyCode.bind(this),this.swipedMove=this.swipedMove.bind(this),this.swipedEnd=this.swipedEnd.bind(this),i.subscribe("open-settings",this.openMenu),i.subscribe("close-menu",this.closeMenu),i.subscribe("set-current-settings",this.setCurrentValue),new o({parent:this.container.querySelector(".headerMenu"),name:"back",className:"cancel",title:"Close",handlerClick:this.closeMenu}),new a({container:this.container,swipedMove:this.swipedMove,swipedEnd:this.swipedEnd}),t.form.addEventListener("click",this.saveSettings)}return r(e,[{key:"closeMenu",value:function(){var e=this;setTimeout(function(){e.container.classList.remove("enabled"),e.container.classList.remove("disabled")},200),this.container.classList.add("disabled"),document.removeEventListener("keydown",this.checkKeyCode)}},{key:"openMenu",value:function(){this.container.classList.add("enabled"),document.addEventListener("keydown",this.checkKeyCode)}},{key:"saveSettings",value:function(e){var t=e.target;"INPUT"===t.tagName&&i.publish("new-settings",{key:t.name,value:t.value})}},{key:"setCurrentValue",value:function(e){var t=e.settings,n=void 0,r=void 0;for(r in t)(n=this.container.querySelector('input[value="'+t[r]+'"]'))&&(n.checked=!0)}},{key:"checkKeyCode",value:function(e){27===e.keyCode&&this.closeMenu()}},{key:"swipedMove",value:function(e,t,n){(t<0?-t:t)<20||("right"===e?this.openMenu():this.closeMenu())}},{key:"swipedEnd",value:function(e,t){}}]),e}();e.exports=s},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(n(1)),o=n(2),a=n(12),s=n(5),c=n(3),u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t.container,this.listSities=this.container.querySelector(".listSavedCities"),this.activeItem,this.showBlock=this.showBlock.bind(this),this.hideBlock=this.hideBlock.bind(this),this.swipedEnd=this.swipedEnd.bind(this),this.swipedMove=this.swipedMove.bind(this),this.checkKeyCode=this.checkKeyCode.bind(this),this.createItemList=this.createItemList.bind(this),i.subscribe("show-saved-cities",this.showBlock),i.subscribe("hide-saved-cities",this.hideBlock),i.subscribe("create-list-saved-sities",this.createItemList),new o({parent:this.container.querySelector(".header .wrapper"),className:"btnBack",name:"back",title:"",handlerClick:this.hideBlock}),new a({container:this.listSities,swipedMove:this.swipedMove,swipedEnd:this.swipedEnd}),this.listSities.addEventListener("click",function(e){var t=e.target;t!==n.listSities&&("LI"===t.tagName?(n.toggleActiveItem(n.activeItem),n.activeItem=t,n.toggleActiveItem(n.activeItem),i.publish("change-current-city",{id:+t.getAttribute("data-id")}),n.hideBlock()):n.deleteItemList(t))}),("ontouchstart"in document||"ontouchstart"in window)&&this.listSities.classList.add("touch-detected")}return r(e,[{key:"deleteItemList",value:function(e){e=s(e,"LI"),i.publish("delete-card",{id:+e.getAttribute("data-id")}),e.classList.add("minHeight"),this.remove(e,"minHeight",!0)}},{key:"swipedMove",value:function(e,t,n){var r=t<0?-t:t;r<20||(n.style.transform="translateZ(0) translateX("+t+"px)",n.style.opacity=""+(1-l(1e3,r)/20))}},{key:"swipedEnd",value:function(e,t){t<0&&(t=-t),l(e.clientWidth,t)>60?this.deleteItemList(e):(e.classList.add("animation"),e.style.transform="translateZ(0) translateX(0px)",e.style.opacity="1",this.remove(e,"animation"))}},{key:"remove",value:function(e,t,n){setTimeout(function(){e.classList.remove(t),n&&e.remove()},250)}},{key:"showBlock",value:function(){var e=this.listSities.querySelector('[data-id="'+c.currentCitiId+'"]');e&&(this.activeItem=e,this.toggleActiveItem(e)),this.container.classList.add("enabled"),document.addEventListener("keydown",this.checkKeyCode)}},{key:"hideBlock",value:function(){var e=this;i.publish("saved-cityes-closed"),this.activeItem&&(this.toggleActiveItem(this.activeItem),this.activeItem=void 0),this.container.classList.add("animationOpacity"),setTimeout(function(){e.container.classList.remove("animationOpacity"),e.container.classList.remove("enabled")},250),document.removeEventListener("keydown",this.checkKeyCode)}},{key:"createItemList",value:function(e){var t=void 0;this.listSities.innerHTML+=e.reduce(function(e,n){return t=n.location,e+'<li class="itemListSavedCities" data-id='+n.id+">\n        "+t.city+" "+t.country+" "+t.region+'\n        <div class="wrapperBtnDel">\n          <button class="defaultBtn">\n            <svg width="25px" height="25px" fill="#1f1d1d" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 774.266 774.266">\n              <path d="M640.35,91.169H536.971V23.991C536.971,10.469,526.064,0,512.543,0c-1.312,0-2.187,0.438-2.614,0.875    C509.491,0.438,508.616,0,508.179,0H265.212h-1.74h-1.75c-13.521,0-23.99,10.469-23.99,23.991v67.179H133.916    c-29.667,0-52.783,23.116-52.783,52.783v38.387v47.981h45.803v491.6c0,29.668,22.679,52.346,52.346,52.346h415.703    c29.667,0,52.782-22.678,52.782-52.346v-491.6h45.366v-47.981v-38.387C693.133,114.286,670.008,91.169,640.35,91.169z     M285.713,47.981h202.84v43.188h-202.84V47.981z M599.349,721.922c0,3.061-1.312,4.363-4.364,4.363H179.282    c-3.052,0-4.364-1.303-4.364-4.363V230.32h424.431V721.922z M644.715,182.339H129.551v-38.387c0-3.053,1.312-4.802,4.364-4.802    H640.35c3.053,0,4.365,1.749,4.365,4.802V182.339z"/>\n              <rect x="475.031" y="286.593" width="48.418" height="396.942"/>\n              <rect x="363.361" y="286.593" width="48.418" height="396.942"/>\n              <rect x="251.69" y="286.593" width="48.418" height="396.942"/>\n            </svg>\n          </button>\n        </div>\n      </li>'},"")}},{key:"deleteActiveItem",value:function(e){e.classList.remove("active")}},{key:"toggleActiveItem",value:function(e){e.classList.toggle("active")}},{key:"checkKeyCode",value:function(e){27===e.keyCode&&this.hideBlock()}}]),e}(),l=function(e,t){return 100/(e/t)};e.exports=u},function(e,t){}]);